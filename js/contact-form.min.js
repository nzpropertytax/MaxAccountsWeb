(function(){"use strict";var n={form:null,submitBtn:null,successMessage:null,errorMessage:null,apiEndpoint:"/api/contact",apiKey:null,customSuccessMessage:null,init:function(){var t,i,r;(this.form=document.getElementById("contact-form"),this.form)&&(this.submitBtn=document.getElementById("submit-btn"),this.successMessage=document.getElementById("contact-success-message"),this.errorMessage=document.getElementById("contact-error-message"),t=this.form.dataset.endpoint,t&&t.trim()!==""&&(this.apiEndpoint=t),i=this.form.dataset.apiKey,i&&i.trim()!==""&&(this.apiKey=i),r=this.form.dataset.successMessage,r&&r.trim()!==""&&(this.customSuccessMessage=r),this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.form.querySelectorAll("input, select, textarea").forEach(function(t){t.addEventListener("blur",function(){n.validateField(t)});t.addEventListener("input",function(){t.classList.contains("is-invalid")&&n.validateField(t)})}))},validateField:function(n){var t=n.checkValidity();return t?(n.classList.remove("is-invalid"),n.classList.add("is-valid")):(n.classList.remove("is-valid"),n.classList.add("is-invalid")),t},validateForm:function(){var i=!0,r=this,n,t;return this.form.querySelectorAll("input, select, textarea").forEach(function(n){r.validateField(n)||(i=!1)}),n=document.getElementById("robotCheck"),t=document.getElementById("robot-check-error"),n&&!n.checked?(i=!1,n.classList.add("is-invalid"),t&&(t.textContent="Please confirm you are not a robot.")):n&&(n.classList.remove("is-invalid"),t&&(t.textContent="")),i},handleSubmit:function(n){var t,i;if(n.preventDefault(),this.hideMessages(),!this.validateForm()){this.showError("Please correct the errors in the form.");return}if(t=document.getElementById("middleName"),t&&t.value.trim()!==""){this.showSuccess(this.customSuccessMessage||"Thank you for contacting us! We'll get back to you soon.");this.form.reset();return}i={firstName:this.getValue("firstName"),lastName:this.getValue("lastName"),email:this.getValue("email"),mobileNumber:this.getValue("mobileNumber"),subject:this.getValue("subject"),message:this.getValue("message"),robotCheck:document.getElementById("robotCheck").checked};this.setLoading(!0);this.submitForm(i)},getValue:function(n){var t=document.getElementById(n);return t?t.value.trim():""},submitForm:function(n){var t=this,i={"Content-Type":"application/json",Accept:"application/json"};this.apiKey&&(i["X-API-Key"]=this.apiKey);fetch(this.apiEndpoint,{method:"POST",headers:i,body:JSON.stringify(n)}).then(function(n){return n.json().then(function(t){return{ok:n.ok,status:n.status,data:t}})}).then(function(n){var i,r;t.setLoading(!1);n.ok&&n.data.success?(i=t.customSuccessMessage||n.data.message||"Thank you for contacting us! We'll get back to you soon.",t.showSuccess(i),t.form.reset(),t.clearValidation()):(r=n.data.error||n.data.message||"Unable to send message. Please try again.",t.showError(r))}).catch(function(n){t.setLoading(!1);console.error("Contact form error:",n);t.showError("Unable to send message. Please try again or contact us directly.")})},setLoading:function(n){this.submitBtn&&(this.submitBtn.disabled=n,this.submitBtn.innerHTML=n?'<i class="fa fa-spinner fa-spin me-2"><\/i>Sending...':'<i class="fa fa-paper-plane me-2"><\/i>Send Message')},showSuccess:function(n){if(this.successMessage){var t=document.getElementById("success-text");t&&(t.textContent=n);this.successMessage.classList.remove("d-none");this.scrollToMessage(this.successMessage)}},showError:function(n){if(this.errorMessage){var t=document.getElementById("error-text");t&&(t.textContent=n);this.errorMessage.classList.remove("d-none");this.scrollToMessage(this.errorMessage)}},hideMessages:function(){this.successMessage&&this.successMessage.classList.add("d-none");this.errorMessage&&this.errorMessage.classList.add("d-none")},scrollToMessage:function(n){n&&n.scrollIntoView({behavior:"smooth",block:"nearest"})},clearValidation:function(){this.form.querySelectorAll(".is-valid, .is-invalid").forEach(function(n){n.classList.remove("is-valid","is-invalid")})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){n.init()}):n.init();window.ContactForm=n})()