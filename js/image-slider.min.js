class ImageSlider{constructor(n){this.container=n;this.sliderId=n.getAttribute("data-slider-id");this.transitionEffect=n.getAttribute("data-transition-effect")||"fade";this.image=n.querySelector(".slider-image");this.currentIndexDisplay=n.querySelector(".current-index");this.prevBtn=n.querySelector('[data-action="prev"]');this.nextBtn=n.querySelector('[data-action="next"]');this.sliderDataDiv=n.querySelector(".slider-data");this.images=this.loadImages();this.currentIndex=0;this.autoPlayInterval=null;this.autoPlayDelay=5e3;this.isPaused=!1;this.isTransitioning=!1;this.init()}loadImages(){if(!this.sliderDataDiv)return[];const n=this.sliderDataDiv.getAttribute("data-images-json");if(n)try{const t=JSON.parse(n);if(Array.isArray(t))return t.filter(n=>n&&n.url).map(n=>({url:n.url,title:n.title||"",alt:n.alt||""}))}catch(i){console.warn(`Slider ${this.sliderId} failed to parse image data.`,i)}const t=this.sliderDataDiv.textContent.trim();return t?t.split("|").filter(Boolean).map(n=>({url:n.trim(),title:"",alt:""})):[]}init(){this.prevBtn&&this.prevBtn.addEventListener("click",()=>this.handlePrevClick());this.nextBtn&&this.nextBtn.addEventListener("click",()=>this.handleNextClick());this.updateDisplay();this.startAutoPlay();this.container.addEventListener("mouseenter",()=>this.pauseAutoPlay());this.container.addEventListener("mouseleave",()=>this.resumeAutoPlay())}handlePrevClick(){this.isTransitioning||(this.pauseAutoPlay(),this.previous(),this.resumeAutoPlay())}handleNextClick(){this.isTransitioning||(this.pauseAutoPlay(),this.next(),this.resumeAutoPlay())}startAutoPlay(){this.images.length>1&&(this.autoPlayInterval=setInterval(()=>{this.next()},this.autoPlayDelay),this.isPaused=!1)}pauseAutoPlay(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.isPaused=!0)}resumeAutoPlay(){this.isPaused&&this.startAutoPlay()}next(){this.images.length>0&&(this.currentIndex=(this.currentIndex+1)%this.images.length,this.applyTransition())}previous(){this.images.length>0&&(this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length,this.applyTransition())}applyTransition(){this.isTransitioning=!0;switch(this.transitionEffect){case"fade":this.transitionFade();break;case"slide":this.transitionSlide();break;case"zoom":this.transitionZoom();break;case"blur":this.transitionBlur();break;default:this.transitionFade()}}transitionFade(){this.image.style.opacity="0";this.image.style.transition="opacity 0.6s ease-in-out";setTimeout(()=>{this.updateDisplay(),this.image.style.opacity="1"},300);setTimeout(()=>{this.isTransitioning=!1,this.image.style.transition="none"},600)}transitionSlide(){this.image.style.transform="translateX(100%)";this.image.style.transition="transform 0.6s ease-in-out";setTimeout(()=>{this.image.style.transform="translateX(-100%)",this.updateDisplay()},300);setTimeout(()=>{this.image.style.transform="translateX(0)"},320);setTimeout(()=>{this.isTransitioning=!1,this.image.style.transition="none"},600)}transitionZoom(){this.image.style.transform="scale(1.1)";this.image.style.opacity="0";this.image.style.transition="transform 0.6s ease-in-out, opacity 0.6s ease-in-out";setTimeout(()=>{this.image.style.transform="scale(0.9)",this.updateDisplay(),this.image.style.opacity="1"},300);setTimeout(()=>{this.image.style.transform="scale(1)"},320);setTimeout(()=>{this.isTransitioning=!1,this.image.style.transition="none"},600)}transitionBlur(){this.image.style.filter="blur(10px)";this.image.style.opacity="0.3";this.image.style.transition="filter 0.6s ease-in-out, opacity 0.6s ease-in-out";setTimeout(()=>{this.updateDisplay(),this.image.style.filter="blur(0)",this.image.style.opacity="1"},300);setTimeout(()=>{this.isTransitioning=!1,this.image.style.transition="none"},600)}updateDisplay(){if(this.image&&this.images.length!==0){const n=this.images[this.currentIndex];if(n){const t=n.alt||n.title||`Slide ${this.currentIndex+1}`;this.image.src=n.url;this.image.alt=t;this.image.title=t;this.image.setAttribute("data-index",this.currentIndex);this.currentIndexDisplay&&(this.currentIndexDisplay.textContent=this.currentIndex+1)}}}}document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".image-slider-container");n.forEach(n=>{new ImageSlider(n)})})